import{c as b,d as L,r as m,j as e,aE as F,aF as v,n as M,aG as N,P as y,aH as E,aI as A,aJ as z,l as I,h as J}from"./index-BbqGDQoq.js";import{T as O}from"./tag-2UcWywgL.js";import{I as R}from"./image-BiLtPsEr.js";import{M as T}from"./mail-BqhN6nmL.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],S=b("code",$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],q=b("link",U);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],D=b("store",H),l=({icon:u,label:s,name:c,error:t,required:i,...g})=>{const p=u;return e.jsxs("div",{children:[e.jsxs("label",{htmlFor:c,className:" text-sm font-semibold text-secondary mb-2 flex items-center gap-2",children:[e.jsx(p,{className:"w-4 h-4 text-accent"}),e.jsx("span",{children:s}),i&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:c,name:c,className:`w-full rounded-lg px-4 py-3 bg-input text-input border-themed border-hover placeholder-theme ${t?"border-red-500":""}`,...g}),t&&e.jsx("p",{className:"text-red-500 text-xs mt-1.5",children:t})]})};function K(){const u=L(),[s,c]=m.useState({shop_name:"",slogan:"",logo_url:"",favicon_url:"",phone_number:"",email:"",address:"",zalo_link:"",facebook_link:"",template_name:"default",header_settings:null,footer_settings:null}),[t,i]=m.useState({}),[g,p]=m.useState(!1),[f,_]=m.useState(""),[j,x]=m.useState(""),o=a=>{const{name:n,value:r}=a.target;c({...s,[n]:r}),t[n]&&i(h=>{const d={...h};return delete d[n],d})},k=(a,n)=>{try{const r=n?JSON.parse(n):null;c({...s,[a]:r}),t[a]&&i(h=>{const d={...h};return delete d[a],d})}catch{i(h=>({...h,[a]:"Dữ liệu không phải JSON hợp lệ."}))}},C=()=>{let a={};return s.shop_name||(a.shop_name="Tên Shop không được để trống."),s.email?/\S+@\S+\.\S+/.test(s.email)||(a.email="Email không hợp lệ."):a.email="Email không được để trống.",s.logo_url&&!/^https?:\/\/\S+/.test(s.logo_url)&&(a.logo_url="URL Logo không hợp lệ."),s.favicon_url&&!/^https?:\/\/\S+/.test(s.favicon_url)&&(a.favicon_url="URL Favicon không hợp lệ."),s.zalo_link&&!/^\+?\d{9,15}$/.test(s.zalo_link)&&(a.zalo_link="URL Zalo không hợp lệ."),s.facebook_link&&!/^https?:\/\/\S+/.test(s.facebook_link)&&(a.facebook_link="URL Facebook không hợp lệ."),s.phone_number&&!/^\+?\d{9,15}$/.test(s.phone_number)&&(a.phone_number="Số điện thoại không hợp lệ."),i(a),Object.keys(a).length===0},w=async a=>{if(a.preventDefault(),_(""),x(""),!C()){x("Vui lòng kiểm tra lại các trường bị lỗi.");return}p(!0);try{const n=await J.post("/activeWeb",s),r=n;n.status?(_("Cập nhật web thành công! Đang chuyển hướng..."),sessionStorage.setItem("business_settings",JSON.stringify(r.business_settings)),u("/dashboard")):(x(r.message||"Có lỗi xảy ra khi Cập nhật web."),r.errors&&i(r.errors))}catch(n){console.error("Lỗi API:",n),x("Không thể kết nối đến máy chủ. Vui lòng thử lại sau.")}finally{p(!1)}};return e.jsx("div",{className:"min-h-screen bg-background p-4 sm:p-6 lg:p-8",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("form",{onSubmit:w,className:"bg-content-bg border border-themed rounded-2xl shadow-xl overflow-hidden",children:[e.jsxs("div",{className:"p-6 md:p-8 border-b border-themed bg-gradient-to-r from-background to-content-bg",children:[e.jsxs("h1",{className:"font-heading text-3xl md:text-4xl font-bold text-primary flex items-center gap-3",children:[e.jsx(F,{className:"w-8 h-8 text-accent"}),"Cấu hình Shop của bạn"]}),e.jsx("p",{className:"text-secondary mt-2",children:"Hãy điền các thông tin dưới đây để shop của bạn trông thật lung linh và chuyên nghiệp nhé!"})]}),e.jsxs("div",{className:"p-6 md:p-8 space-y-8",children:[f&&e.jsxs("div",{className:"alert alert-success",children:[e.jsx(v,{className:"w-5 h-5 mr-2"}),f]}),j&&e.jsxs("div",{className:"alert alert-danger",children:[e.jsx(M,{className:"w-5 h-5 mr-2"}),j]}),e.jsxs("section",{children:[e.jsxs("h2",{className:"font-heading text-xl font-semibold text-primary flex items-center gap-3 border-b border-themed/50 pb-3 mb-6",children:[e.jsx(D,{})," Thông tin cơ bản"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(l,{icon:O,label:"Tên Shop",name:"shop_name",value:s.shop_name,onChange:o,error:t.shop_name,required:!0,placeholder:"Akihabara Gaming"}),e.jsx(l,{icon:R,label:"URL Logo",name:"logo_url",value:s.logo_url,onChange:o,error:t.logo_url,placeholder:"https://example.com/logo.png"}),e.jsx(l,{icon:q,label:"URL Favicon",name:"favicon_url",value:s.favicon_url,onChange:o,error:t.favicon_url,placeholder:"https://example.com/favicon.ico"}),e.jsx(l,{icon:N,label:"Slogan/Mô tả ngắn",name:"slogan",value:s.slogan,onChange:o,placeholder:"Nơi ước mơ gaming trở thành sự thật!"})]})]}),e.jsxs("section",{children:[e.jsxs("h2",{className:"font-heading text-xl font-semibold text-primary flex items-center gap-3 border-b border-themed/50 pb-3 mb-6",children:[e.jsx(y,{})," Thông tin liên hệ"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(l,{icon:T,label:"Email Liên Hệ",name:"email",type:"email",value:s.email,onChange:o,error:t.email,required:!0,placeholder:"contact@shop.com"}),e.jsx(l,{icon:y,label:"Số Điện Thoại",name:"phone_number",value:s.phone_number,onChange:o,error:t.phone_number,placeholder:"09xxxxxxxx"}),e.jsx(l,{icon:E,label:"Địa Chỉ Shop",name:"address",value:s.address,onChange:o,placeholder:"123 Đường Anime, Quận Manga..."}),e.jsx(l,{icon:N,label:"Link Zalo",name:"zalo_link",value:s.zalo_link,onChange:o,error:t.zalo_link,placeholder:"Link Zalo của shop"}),e.jsx(l,{icon:A,label:"Link Facebook",name:"facebook_link",value:s.facebook_link,onChange:o,error:t.facebook_link,placeholder:"Link trang Facebook của shop"})]})]}),e.jsxs("section",{children:[e.jsxs("h2",{className:"font-heading text-xl font-semibold text-primary flex items-center gap-3 border-b border-themed/50 pb-3 mb-6",children:[e.jsx(z,{})," Cấu hình nâng cao (JSON)"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"header_settings",className:"block text-sm font-semibold text-secondary mb-2 flex items-center gap-2",children:[e.jsx(S,{})," Header Settings (JSON)"]}),e.jsx("textarea",{id:"header_settings",rows:"5",onChange:a=>k("header_settings",a.target.value),className:`w-full font-mono text-sm rounded-lg p-3 bg-input text-input border-themed border-hover placeholder-theme ${t.header_settings?"border-red-500":""}`,placeholder:'{ "key": "value" }'}),t.header_settings&&e.jsx("p",{className:"text-red-500 text-xs mt-1.5",children:t.header_settings})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"footer_settings",className:"block text-sm font-semibold text-secondary mb-2 flex items-center gap-2",children:[e.jsx(S,{})," Footer Settings (JSON)"]}),e.jsx("textarea",{id:"footer_settings",rows:"5",onChange:a=>k("footer_settings",a.target.value),className:`w-full font-mono text-sm rounded-lg p-3 bg-input text-input border-themed border-hover placeholder-theme ${t.footer_settings?"border-red-500":""}`,placeholder:'{ "copyright": "Your Shop" }'}),t.footer_settings&&e.jsx("p",{className:"text-red-500 text-xs mt-1.5",children:t.footer_settings})]})]})]})]}),e.jsx("div",{className:"p-6 bg-background/50 border-t border-themed flex justify-end",children:e.jsx("button",{type:"submit",disabled:g,className:"action-button action-button-primary !w-auto",children:g?e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"animate-spin mr-2 h-5 w-5"})," Đang lưu cấu hình..."]}):e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"mr-2 h-5 w-5"})," Lưu và Kích hoạt"]})})})]})})})}export{K as default};
