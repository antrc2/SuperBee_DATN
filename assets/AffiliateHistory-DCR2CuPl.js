import{r as a,u as f,b as y,j as t,a4 as g,X as u,h as j}from"./index-DJ8jfsRI.js";function k(){const[i,l]=a.useState([]),[x,c]=a.useState(!0),[o,p]=a.useState(null),{pop:r}=f(),{user:n}=y(),[m,d]=a.useState(!1),h=`https://superbee.site/auth/register?aff=${(n==null?void 0:n.id)||""}`,b=async()=>{try{await navigator.clipboard.writeText(h),r("Đã copy link liên kết thành công!","s")}catch{r("Copy thất bại, hãy thử lại!","e")}};return a.useEffect(()=>{(async()=>{c(!0);try{const e=await j.get("/user/getHistoryAff");e.data&&Array.isArray(e.data.data)?l(e.data.data):l([])}catch{p("Không thể tải lịch sử tiếp thị!"),r("Không thể tải lịch sử tiếp thị!","e")}finally{c(!1)}})()},[]),t.jsxs("section",{className:"section-bg p-6 md:p-8 rounded-2xl shadow-lg",children:[t.jsx("h1",{className:"font-heading text-2xl font-bold mb-6 text-primary",children:"Lịch sử tiếp thị liên kết"}),t.jsxs("button",{className:"mb-4 px-4 py-2 bg-accent text-primary rounded hover:bg-accent/80 text-sm font-semibold flex items-center gap-2",onClick:()=>d(!0),children:[t.jsx(g,{className:"h-4 w-4"}),"Hiển thị link tiếp thị liên kết"]}),m&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:t.jsxs("div",{className:"bg-gradient-header rounded-xl shadow-lg p-6 w-full max-w-md relative",children:[t.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",onClick:()=>d(!1),children:t.jsx(u,{className:"h-5 w-5"})}),t.jsx("h3",{className:"font-bold text-lg mb-4 text-primary",children:"Link tiếp thị liên kết của bạn"}),t.jsxs("div",{className:"flex items-center gap-2 border rounded-lg p-2",children:[t.jsx("input",{type:"text",value:h,readOnly:!0,className:"flex-1 bg-transparent outline-none text-sm text-gray-700"}),t.jsx("button",{onClick:b,className:"px-3 py-1 bg-accent text-primary rounded hover:bg-accent/80 text-xs font-semibold",children:"Copy"})]}),t.jsx("p",{className:"text-xs text-secondary mt-2",children:"Gửi link này cho bạn bè, khi họ đăng ký bạn sẽ nhận được hoa hồng!"})]})}),x?t.jsx("div",{children:"Đang tải..."}):o?t.jsx("div",{className:"text-red-500",children:o}):i.length===0?t.jsx("div",{children:"Chưa có lịch sử tiếp thị nào."}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full border text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"text-primary",children:[t.jsx("th",{className:"px-4 py-2 border",children:"STT"}),t.jsx("th",{className:"px-4 py-2 border",children:"Mã đơn hàng"}),t.jsx("th",{className:"px-4 py-2 border",children:"Hoa hồng (VNĐ)"}),t.jsx("th",{className:"px-4 py-2 border",children:"Ngày nhận"})]})}),t.jsx("tbody",{children:i.map((s,e)=>t.jsxs("tr",{className:"text-center",children:[t.jsx("td",{className:"px-4 py-2 border",children:e+1}),t.jsx("td",{className:"px-4 py-2 border",children:s.order_id}),t.jsxs("td",{className:"px-4 py-2 border font-semibold text-primary",children:[s.commission_amount.toLocaleString("vi-VN")," đ"]}),t.jsx("td",{className:"px-4 py-2 border",children:new Date(s.created_at).toLocaleString("vi-VN",{hour12:!1})})]},s.order_id+e))})]})})]})}export{k as default};
