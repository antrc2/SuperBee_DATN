import{r as d,j as e,g as h,L as g,h as u}from"./index-b9nMIW9s.js";function o({title:i,value:n,icon:l,linkTo:s}){return e.jsxs(g,{to:s,className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md hover:shadow-xl hover:-translate-y-1 transition-all duration-300 flex items-center",children:[e.jsx("div",{className:"p-3 bg-indigo-500 rounded-full text-white mr-4",children:l}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:i}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:n})]})]})}function y(){const[i,n]=d.useState(null),[l,s]=d.useState(!0),[x,c]=d.useState("");if(d.useEffect(()=>{(async()=>{s(!0),c("");try{const a=await u.get("/admin/authorization/dashboard");n(a.data.data)}catch(a){c("Không thể tải dữ liệu tổng quan. Vui lòng thử lại."),console.error(a)}finally{s(!1)}})()},[]),l)return e.jsx(h,{});if(x)return e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded m-4",children:x});const{stats:r,power_users:m}=i;return e.jsxs("div",{className:"container mx-auto p-4 md:p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100",children:"Tổng quan Phân quyền"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[e.jsx(o,{title:"Tổng số Vai trò",value:(r==null?void 0:r.role_count)??0,linkTo:"/admin/authorization/roles"}),e.jsx(o,{title:"Tổng số Quyền hạn",value:(r==null?void 0:r.permission_count)??0,linkTo:"/admin/authorization/permissions"}),e.jsx(o,{title:"Tài khoản có quyền",value:(r==null?void 0:r.power_user_count)??0,linkTo:"#"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-xl rounded-lg overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:"Danh sách Tài khoản có quyền quản trị"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Người dùng"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Vai trò"}),e.jsx("th",{className:"relative px-6 py-3",children:e.jsx("span",{className:"sr-only",children:"Hành động"})})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:m&&m.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:t.avatar_url,alt:t.username})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:t.username}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:t.roles.map(a=>e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full capitalize 
                          ${a.name==="admin"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300":""}
                          ${a.name==="super-admin"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300":""}
                          ${a.name!=="admin"&&a.name!=="super-admin"?"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300":""}`,children:a.name.replace("_"," ")},a.id))})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx(g,{to:`/admin/authorization/users/${t.id}/manage`,className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:"Quản lý"})})]},t.id))})]})})]})]})}export{y as default};
