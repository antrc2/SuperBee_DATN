import{d as v,u as N,r as g,j as e,L as w,h as C}from"./index-b9nMIW9s.js";const P=()=>{const b=v(),{pop:p}=N(),[t,m]=g.useState({name:"",slug:"",description:""}),[x,h]=g.useState(!1),[s,d]=g.useState({}),f=r=>r.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/đ/g,"d").replace(/Đ/g,"D");g.useEffect(()=>{const r=f(t.name).toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");m(a=>({...a,slug:r}))},[t.name]);const k=()=>{const r={};return t.name.trim()||(r.name="Tên category không được để trống."),d(r),Object.keys(r).length===0},u=r=>{const{name:a,value:i}=r.target;m(n=>({...n,[a]:i})),s[a]&&d(n=>{const o={...n};return delete o[a],o})},j=async r=>{var a,i,n,o,y;if(r.preventDefault(),!!k()){h(!0),d({});try{((a=(await C.post("/admin/categoryPost",t)).data)==null?void 0:a.status)===!0&&(p("Thêm mới category thành công!","s"),b("/admin/categoryPost"))}catch(c){const l=(n=(i=c.response)==null?void 0:i.data)==null?void 0:n.errors;d(l&&typeof l=="object"?l:{form:((y=(o=c.response)==null?void 0:o.data)==null?void 0:y.message)||"Đã xảy ra lỗi, vui lòng thử lại!"}),console.error(c)}finally{h(!1)}}};return e.jsx("div",{className:"p-4 sm:p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:e.jsxs("form",{onSubmit:j,noValidate:!0,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Tạo danh mục bài viết"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Điền các thông tin dưới đây để tạo một danh mục mới."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(w,{to:"/admin/categoryPost",className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg shadow-sm hover:bg-gray-50 dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600 dark:hover:bg-gray-600",children:"Hủy"}),e.jsx("button",{type:"submit",disabled:x,className:"inline-flex items-center justify-center px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-lg shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 dark:focus:ring-offset-gray-800",children:x?"Đang lưu...":"Lưu danh mục"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-6 bg-white dark:bg-gray-800 rounded-lg shadow-sm border dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900 dark:text-gray-100 mb-4",children:"Thông tin bắt buộc"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Tên Category"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{type:"text",id:"name",name:"name",value:t.name,onChange:u,className:`block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 ${s.name?"border-red-400 focus:border-red-500 focus:ring-red-500 dark:border-red-500":"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600"}`,placeholder:"VD: Tin tức công nghệ"})}),s.name&&e.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-500",children:s.name})]})]}),e.jsxs("div",{className:"p-6 bg-white dark:bg-gray-800 rounded-lg shadow-sm border dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900 dark:text-gray-100",children:"Mô tả (Không bắt buộc)"}),e.jsx("div",{className:"mt-4",children:e.jsx("textarea",{id:"description",name:"description",rows:4,value:t.description,onChange:u,className:"block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:border-gray-600",placeholder:"Nhập mô tả ngắn gọn về danh mục này..."})})]}),s.form&&e.jsx("p",{className:"text-red-500 text-sm text-center py-2 px-4 bg-red-50 dark:bg-red-900/50 rounded-lg",children:s.form})]})]})})};export{P as default};
