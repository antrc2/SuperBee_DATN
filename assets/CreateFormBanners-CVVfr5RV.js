import{r as a,j as e,X as N}from"./index-BDAcJp4Y.js";import{I as w}from"./image-plus-C5pcu-jQ.js";function I({initialData:s,onSubmit:y,isEditing:x=!1,isLoading:p=!1}){const[i,f]=a.useState({title:"",image_url:"",link:"",status:1}),[d,o]=a.useState(null),[r,c]=a.useState(null),g=a.useRef(null);a.useEffect(()=>{s&&(f({title:s.title||"",image_url:s.image_url||"",link:s.link||"",status:s.status??1}),s.image_url&&o({image_url:s.image_url}),c(null))},[s]);const u=l=>{const{name:t,value:n}=l.target;f(h=>({...h,[t]:n}))},j=l=>{const t=l.target.files[0];if(!t)return;const n=Object.assign(t,{preview:URL.createObjectURL(t)});c(n),o(null)},k=()=>{r&&URL.revokeObjectURL(r.preview),c(null),o(null)};a.useEffect(()=>()=>{r&&URL.revokeObjectURL(r.preview)},[r]);const v=l=>{if(l.preventDefault(),!d&&!r){alert("Vui lòng chọn một ảnh banner.");return}const t=new FormData;Object.entries(i).forEach(([n,h])=>t.append(n,h)),r&&t.append("image",r),x&&!r&&d&&t.delete("image_url"),y(t)},m="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300",b="w-full p-2.5 bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500";return e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 p-6 bg-white border border-gray-200 rounded-lg shadow-sm dark:bg-gray-800 dark:border-gray-700",children:[e.jsx("h3",{className:"mb-6 text-lg font-semibold text-gray-900 dark:text-white",children:"Thông tin banner"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"title",className:m,children:"Tiêu đề"}),e.jsx("input",{type:"text",name:"title",id:"title",value:i.title,onChange:u,className:b,placeholder:"Ví dụ: Banner khuyến mãi hè"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"link",className:m,children:"Link (URL)"}),e.jsx("input",{type:"url",name:"link",id:"link",value:i.link,onChange:u,className:b,placeholder:"https://example.com/khuyen-mai"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status",className:m,children:"Trạng thái"}),e.jsxs("select",{name:"status",id:"status",value:i.status,onChange:u,className:b,children:[e.jsx("option",{value:1,children:"Hiển thị"}),e.jsx("option",{value:0,children:"Ẩn"})]})]})]})]}),e.jsxs("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm dark:bg-gray-800 dark:border-gray-700",children:[e.jsx("h3",{className:"mb-6 text-lg font-semibold text-gray-900 dark:text-white",children:"Hình ảnh"}),e.jsx("input",{type:"file",accept:"image/png, image/jpeg, image/gif, image/webp",ref:g,onChange:j,className:"hidden"}),d||r?e.jsxs("div",{className:"relative group w-full aspect-video border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden",children:[e.jsx("img",{src:r?r.preview:d.image_url,alt:"Xem trước banner",className:"w-full h-full object-cover"}),e.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{type:"button",onClick:()=>g.current.click(),className:"text-white text-sm bg-gray-800 bg-opacity-70 py-1 px-3 rounded-md mr-2",children:"Thay đổi"}),e.jsx("button",{type:"button",onClick:k,className:"absolute top-2 right-2 bg-black/60 text-white rounded-full p-1",children:e.jsx(N,{size:16})})]})]}):e.jsxs("div",{onClick:()=>g.current.click(),className:"flex flex-col items-center justify-center w-full aspect-video border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition",children:[e.jsx(w,{size:40,className:"text-gray-400 dark:text-gray-500 mb-2"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.jsx("span",{className:"font-semibold",children:"Nhấn để tải ảnh lên"})}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"PNG, JPG, GIF hoặc WEBP"})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("button",{type:"submit",disabled:p,className:"bg-blue-600 text-white py-2.5 px-6 rounded-lg hover:bg-blue-700 focus:ring-4 focus:ring-blue-300 disabled:bg-blue-400 dark:focus:ring-blue-800 transition-colors",children:p?"Đang xử lý...":x?"Cập nhật":"Lưu banner"})})]})}export{I as C};
