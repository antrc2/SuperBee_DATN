import{r as g,Q as n,j as e}from"./index-BDAcJp4Y.js";const m=({children:s,htmlFor:l})=>e.jsx("label",{htmlFor:l,className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:s}),o=({hasError:s,...l})=>e.jsx("input",{...l,className:`mt-2 block w-full rounded-md border bg-transparent px-3 py-2 text-sm placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 disabled:opacity-50
      ${s?"border-red-500 text-red-600":"border-slate-300 dark:border-slate-700"}`}),j=({hasError:s,...l})=>e.jsx("select",{...l,className:`mt-2 block w-full rounded-md border bg-white dark:bg-slate-800 px-3 py-2 text-sm placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 disabled:opacity-50
      ${s?"border-red-500 text-red-600":"border-slate-300 dark:border-slate-700"}`,children:l.children});function y({initialData:s=null,onSubmit:l,isEditing:b=!1,isLoading:i=!1}){const[t,p]=g.useState({amount:(s==null?void 0:s.amount)||"",start_date:s!=null&&s.start_date?n(s.start_date).format("YYYY-MM-DDTHH:mm"):"",end_date:s!=null&&s.end_date?n(s.end_date).format("YYYY-MM-DDTHH:mm"):"",usage_limit:(s==null?void 0:s.usage_limit)??-1,per_user_limit:(s==null?void 0:s.per_user_limit)??-1,status:(s==null?void 0:s.status)??1}),[r,x]=g.useState({}),a=c=>{const{name:d,value:u}=c.target;p(h=>({...h,[d]:u})),r[d]&&x(h=>({...h,[d]:null}))},_=c=>{c.preventDefault();const d={};if((!t.amount||t.amount<=0)&&(d.amount="Giá trị khuyến mãi phải là số lớn hơn 0."),t.start_date||(d.start_date="Vui lòng chọn ngày bắt đầu."),t.end_date||(d.end_date="Vui lòng chọn ngày kết thúc."),t.start_date&&t.end_date&&n(t.end_date).isBefore(n(t.start_date))&&(d.end_date="Ngày kết thúc không được trước ngày bắt đầu."),Object.keys(d).length>0){x(d);return}const u={...t,start_date:n(t.start_date).format("YYYY-MM-DD HH:mm:ss"),end_date:n(t.end_date).format("YYYY-MM-DD HH:mm:ss")};l(u)};return e.jsxs("form",{onSubmit:_,children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"border-b border-slate-200 dark:border-slate-700 pb-8",children:[e.jsx("h3",{className:"text-base font-semibold leading-7 text-slate-900 dark:text-slate-100",children:"Thông tin cơ bản"}),e.jsx("p",{className:"mt-1 text-sm leading-6 text-slate-600 dark:text-slate-400",children:"Thiết lập giá trị khuyến mãi và trạng thái hoạt động."}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:[e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx(m,{htmlFor:"amount",children:"Giá trị khuyến mãi (%)"}),e.jsx(o,{id:"amount",name:"amount",type:"number",value:t.amount,onChange:a,placeholder:"Ví dụ: 10",hasError:!!r.amount}),r.amount&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.amount})]}),e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx(m,{htmlFor:"status",children:"Trạng thái"}),e.jsxs(j,{id:"status",name:"status",value:t.status,onChange:a,children:[e.jsx("option",{value:1,children:"Hoạt động"}),e.jsx("option",{value:0,children:"Tạm tắt"})]})]})]})]}),e.jsxs("div",{className:"border-b border-slate-200 dark:border-slate-700 pb-8",children:[e.jsx("h3",{className:"text-base font-semibold leading-7 text-slate-900 dark:text-slate-100",children:"Giới hạn sử dụng"}),e.jsx("p",{className:"mt-1 text-sm leading-6 text-slate-600 dark:text-slate-400",children:"Đặt giới hạn số lần mã có thể được sử dụng. Nhập -1 để không giới hạn."}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:[e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx(m,{htmlFor:"usage_limit",children:"Giới hạn sử dụng tổng"}),e.jsx(o,{id:"usage_limit",name:"usage_limit",type:"number",value:t.usage_limit,onChange:a})]}),e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx(m,{htmlFor:"per_user_limit",children:"Giới hạn trên mỗi người"}),e.jsx(o,{id:"per_user_limit",name:"per_user_limit",type:"number",value:t.per_user_limit,onChange:a})]})]})]}),e.jsxs("div",{className:"pb-8",children:[e.jsx("h3",{className:"text-base font-semibold leading-7 text-slate-900 dark:text-slate-100",children:"Thời gian hiệu lực"}),e.jsx("p",{className:"mt-1 text-sm leading-6 text-slate-600 dark:text-slate-400",children:"Khuyến mãi sẽ chỉ có hiệu lực trong khoảng thời gian này."}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:[e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx(m,{htmlFor:"start_date",children:"Thời gian bắt đầu"}),e.jsx(o,{id:"start_date",name:"start_date",type:"datetime-local",value:t.start_date,onChange:a,hasError:!!r.start_date}),r.start_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.start_date})]}),e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx(m,{htmlFor:"end_date",children:"Thời gian kết thúc"}),e.jsx(o,{id:"end_date",name:"end_date",type:"datetime-local",value:t.end_date,onChange:a,hasError:!!r.end_date}),r.end_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.end_date})]})]})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-end gap-x-6",children:[e.jsx("button",{type:"button",className:"text-sm font-semibold leading-6 text-slate-900 dark:text-slate-100",children:"Hủy"}),e.jsx("button",{type:"submit",disabled:i,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600 disabled:opacity-50",children:i?"Đang lưu...":b?"Cập nhật khuyến mãi":"Tạo khuyến mãi"})]})]})}export{y as D};
