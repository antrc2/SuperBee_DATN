import{r as j,R as N,j as e,w as c,q as k}from"./index-DJ8jfsRI.js";import{D as f}from"./react-datepicker-CoLWuPBI.js";const o=({children:s,htmlFor:a})=>e.jsx("label",{htmlFor:a,className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:s}),h=({hasError:s,...a})=>e.jsx("input",{...a,className:`mt-2 block w-full rounded-md border bg-transparent px-3 py-2 text-sm placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 disabled:opacity-50
      ${s?"border-red-500 text-red-600":"border-slate-300 dark:border-slate-700"}`}),v=({hasError:s,...a})=>e.jsx("select",{...a,className:`mt-2 block w-full rounded-md border bg-white dark:bg-slate-800 px-3 py-2 text-sm placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 disabled:opacity-50
      ${s?"border-red-500 text-red-600":"border-slate-300 dark:border-slate-700"}`,children:a.children});function Y({initialData:s=null,onSubmit:a,isEditing:_=!1,isLoading:i=!1}){const[t,b]=j.useState({amount:(s==null?void 0:s.amount)||"",start_date:s!=null&&s.start_date?new Date(s.start_date):null,end_date:s!=null&&s.end_date?new Date(s.end_date):null,usage_limit:(s==null?void 0:s.usage_limit)??-1,per_user_limit:(s==null?void 0:s.per_user_limit)??-1,status:(s==null?void 0:s.status)??1}),[l,x]=j.useState({}),u=r=>{const{name:d,value:n}=r.target;b(m=>({...m,[d]:n})),l[d]&&x(m=>({...m,[d]:null}))},g=(r,d)=>{b(n=>({...n,[r]:d})),l[r]&&x(n=>({...n,[r]:null}))},y=r=>{r.preventDefault();const d={};if((!t.amount||t.amount<=0)&&(d.amount="Giá trị khuyến mãi phải là số lớn hơn 0."),t.start_date||(d.start_date="Vui lòng chọn ngày bắt đầu."),t.end_date||(d.end_date="Vui lòng chọn ngày kết thúc."),t.start_date&&t.end_date&&c(t.end_date).isBefore(c(t.start_date))&&(d.end_date="Ngày kết thúc không được trước ngày bắt đầu."),Object.keys(d).length>0){x(d);return}const n={...t,start_date:c(t.start_date).format("YYYY-MM-DD HH:mm:ss"),end_date:c(t.end_date).format("YYYY-MM-DD HH:mm:ss")};a(n)},p=N.forwardRef(({value:r,onClick:d,hasError:n},m)=>e.jsxs("button",{type:"button",onClick:d,ref:m,className:`mt-2 flex w-full items-center justify-between rounded-md border bg-transparent px-3 py-2 text-left text-sm placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500
        ${n?"border-red-500":"border-slate-300 dark:border-slate-700"}`,children:[e.jsx("span",{className:r?n?"text-red-600":"text-slate-800 dark:text-slate-200":"text-slate-400",children:r?c(r).format("DD/MM/YYYY HH:mm"):"Chọn ngày..."}),e.jsx(k,{className:`h-4 w-4 ${n?"text-red-500":"text-slate-500"}`})]}));return e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"border-b border-slate-200 dark:border-slate-700 pb-8",children:[e.jsx("h3",{className:"text-base font-semibold leading-7 text-slate-900 dark:text-slate-100",children:"Thông tin cơ bản"}),e.jsx("p",{className:"mt-1 text-sm leading-6 text-slate-600 dark:text-slate-400",children:"Thiết lập giá trị khuyến mãi và trạng thái hoạt động."}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:[e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx(o,{htmlFor:"amount",children:"Giá trị khuyến mãi (%)"}),e.jsx(h,{id:"amount",name:"amount",type:"number",value:t.amount,onChange:u,placeholder:"Ví dụ: 10",hasError:!!l.amount}),l.amount&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.amount})]}),e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx(o,{htmlFor:"status",children:"Trạng thái"}),e.jsxs(v,{id:"status",name:"status",value:t.status,onChange:u,children:[e.jsx("option",{value:1,children:"Hoạt động"}),e.jsx("option",{value:0,children:"Tạm tắt"})]})]})]})]}),e.jsxs("div",{className:"border-b border-slate-200 dark:border-slate-700 pb-8",children:[e.jsx("h3",{className:"text-base font-semibold leading-7 text-slate-900 dark:text-slate-100",children:"Giới hạn sử dụng"}),e.jsx("p",{className:"mt-1 text-sm leading-6 text-slate-600 dark:text-slate-400",children:"Đặt giới hạn số lần mã có thể được sử dụng. Nhập -1 để không giới hạn."}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:[e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx(o,{htmlFor:"usage_limit",children:"Giới hạn sử dụng tổng"}),e.jsx(h,{id:"usage_limit",name:"usage_limit",type:"number",value:t.usage_limit,onChange:u})]}),e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx(o,{htmlFor:"per_user_limit",children:"Giới hạn trên mỗi người"}),e.jsx(h,{id:"per_user_limit",name:"per_user_limit",type:"number",value:t.per_user_limit,onChange:u})]})]})]}),e.jsxs("div",{className:"pb-8",children:[e.jsx("h3",{className:"text-base font-semibold leading-7 text-slate-900 dark:text-slate-100",children:"Thời gian hiệu lực"}),e.jsx("p",{className:"mt-1 text-sm leading-6 text-slate-600 dark:text-slate-400",children:"Khuyến mãi sẽ chỉ có hiệu lực trong khoảng thời gian này."}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:[e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx(o,{children:"Thời gian bắt đầu"}),e.jsx(f,{selected:t.start_date,onChange:r=>g("start_date",r),showTimeSelect:!0,dateFormat:"Pp",customInput:e.jsx(p,{hasError:!!l.start_date})}),l.start_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.start_date})]}),e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx(o,{children:"Thời gian kết thúc"}),e.jsx(f,{selected:t.end_date,onChange:r=>g("end_date",r),showTimeSelect:!0,dateFormat:"Pp",customInput:e.jsx(p,{hasError:!!l.end_date})}),l.end_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.end_date})]})]})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-end gap-x-6",children:[e.jsx("button",{type:"button",className:"text-sm font-semibold leading-6 text-slate-900 dark:text-slate-100",children:"Hủy"}),e.jsx("button",{type:"submit",disabled:i,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600 disabled:opacity-50",children:i?"Đang lưu...":_?"Cập nhật khuyến mãi":"Tạo khuyến mãi"})]})]})}export{Y as D};
