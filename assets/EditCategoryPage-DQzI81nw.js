import{k as v,d as b,r as n,u as N,j as t,l as E,h as g}from"./index-DJ8jfsRI.js";import{C as S}from"./CategoryForm-DHuxXdwA.js";import{A as w}from"./arrow-left-BPYrqEOQ.js";function z(){const{id:r}=v(),d=b(),[e,f]=n.useState(null),[y,h]=n.useState(!1),[j,m]=n.useState(!0),[o,c]=n.useState(null),p=N();n.useEffect(()=>{(async()=>{m(!0);try{const i=(await g.get(`/admin/categories/${r}`)).data.data;f(i)}catch(s){console.error(s),c("Không tìm thấy danh mục hoặc có lỗi xảy ra.")}finally{m(!1)}})()},[r]);const C=async l=>{var s,i,u,x;h(!0),c(null);try{l.append("_method","put");const a=await g.post(`/admin/categories/${r}`,l,{headers:{"Content-Type":"multipart/form-data"}});(a.status===201||a.status===200)&&(p.pop("Cập nhật danh mục thành công!","s"),d("/admin/categories"))}catch(a){p.pop(((i=(s=a.response)==null?void 0:s.data)==null?void 0:i.message)||"Cập nhật thất bại, vui lòng thử lại.","e"),c(((x=(u=a.response)==null?void 0:u.data)==null?void 0:x.message)||"Cập nhật thất bại, vui lòng thử lại.")}finally{h(!1)}};return j?t.jsx("div",{className:"flex justify-center items-center h-64",children:t.jsx(E,{className:"animate-spin text-blue-500",size:48})}):t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center h-14 mb-4 gap-4",children:[t.jsxs("button",{onClick:()=>d(-1),className:"flex items-center gap-2 text-secondary hover:text-primary px-2 py-1 rounded",children:[t.jsx(w,{size:20}),"Quay lại"]}),t.jsxs("h2",{className:"text-2xl font-semibold text-primary text-center flex-1",children:["Chỉnh sửa danh mục: ",e==null?void 0:e.name]}),t.jsx("div",{className:"w-[120px]"})]}),o&&t.jsx("div",{className:"alert alert-danger mb-4",children:o}),e?t.jsx(S,{initialData:e,onSubmit:C,isEditing:!0,isLoading:y}):t.jsx("p",{children:o||"Không có dữ liệu để hiển thị."})]})}export{z as default};
