import{y as v,l as b,r as n,u as N,j as e,z as E,x as S,e as g}from"./index-BDAcJp4Y.js";import{C as w}from"./CategoryForm-BBFHFLKj.js";function F(){const{id:r}=v(),d=b(),[t,f]=n.useState(null),[y,h]=n.useState(!1),[j,m]=n.useState(!0),[o,c]=n.useState(null),u=N();n.useEffect(()=>{(async()=>{m(!0);try{const i=(await g.get(`/admin/categories/${r}`)).data.data;f(i)}catch(s){console.error(s),c("Không tìm thấy danh mục hoặc có lỗi xảy ra.")}finally{m(!1)}})()},[r]);const C=async l=>{var s,i,p,x;h(!0),c(null);try{l.append("_method","put");const a=await g.post(`/admin/categories/${r}`,l,{headers:{"Content-Type":"multipart/form-data"}});(a.status===201||a.status===200)&&(u.pop("Cập nhật danh mục thành công!","s"),d("/admin/categories"))}catch(a){u.pop(((i=(s=a.response)==null?void 0:s.data)==null?void 0:i.message)||"Cập nhật thất bại, vui lòng thử lại.","e"),c(((x=(p=a.response)==null?void 0:p.data)==null?void 0:x.message)||"Cập nhật thất bại, vui lòng thử lại.")}finally{h(!1)}};return j?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(E,{className:"animate-spin text-blue-500",size:48})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center h-14 mb-4 gap-4",children:[e.jsxs("button",{onClick:()=>d(-1),className:"flex items-center gap-2 text-secondary hover:text-primary px-2 py-1 rounded",children:[e.jsx(S,{size:20}),"Quay lại"]}),e.jsxs("h2",{className:"text-2xl font-semibold text-primary text-center flex-1",children:["Chỉnh sửa danh mục: ",t==null?void 0:t.name]}),e.jsx("div",{className:"w-[120px]"})]}),o&&e.jsx("div",{className:"alert alert-danger mb-4",children:o}),t?e.jsx(w,{initialData:t,onSubmit:C,isEditing:!0,isLoading:y}):e.jsx("p",{children:o||"Không có dữ liệu để hiển thị."})]})}export{F as default};
