import{h as g,b as j,r as s,j as t,i as b,L as v,f as u}from"./index-OefKdV4-.js";import{D as N}from"./DonatePromotionForm--V4TnOtZ.js";import{A as P}from"./arrow-left-C_QBwxTB.js";import"./react-datepicker-CnkPl9PV.js";function A(){const{id:a}=g(),x=j(),[m,c]=s.useState(null),[f,l]=s.useState(!1),[p,d]=s.useState(!0),[n,i]=s.useState(null);s.useEffect(()=>{(async()=>{var e;d(!0);try{const o=(e=(await u.get(`/admin/donate_promotions/${a}`)).data)==null?void 0:e.data;Array.isArray(o)&&o.length>0?c(o[0]):(c(null),i("Không tìm thấy khuyến mãi."))}catch(h){console.error(h),i("Lỗi khi tải khuyến mãi.")}finally{d(!1)}})()},[a]);const y=async r=>{l(!0);try{r.append("_method","put");const e=await u.post(`/admin/donate_promotions/${a}`,r,{headers:{"Content-Type":"multipart/form-data"}});(e.status===200||e.status===201)&&x("/admin/donatePromotions")}catch(e){console.error(e),i("Cập nhật thất bại.")}finally{l(!1)}};return p?t.jsx("div",{className:"flex justify-center items-center h-64",children:t.jsx(b,{className:"animate-spin text-blue-500",size:48})}):t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center h-14",children:[t.jsx("div",{className:"flex items-center  ",children:t.jsxs(v,{to:"/admin/donatePromotions",className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",children:[t.jsx(P,{size:20}),"Quay lại danh sách"]})}),t.jsx("h2",{className:"text-2xl font-semibold mb-4 ml-4 mt-3 text-gray-700",children:"Thêm sản phẩm mới"})]}),n&&t.jsx("div",{className:"bg-red-100 text-red-700 p-3 rounded-md mb-4",children:n}),m?t.jsx(N,{initialData:m,onSubmit:y,isEditing:!0,isLoading:f}):t.jsx("p",{children:n||"Không có dữ liệu để hiển thị."})]})}export{A as default};
