import{k as g,d as j,r as s,j as t,l as v,L as N,h as u}from"./index-DGRL5TTe.js";import{D as P}from"./DonatePromotionForm-CZWCLS5c.js";import{A as b}from"./arrow-left-CpInBLIv.js";import"./react-datepicker-Son1yD7V.js";function A(){const{id:a}=g(),x=j(),[m,c]=s.useState(null),[f,l]=s.useState(!1),[p,d]=s.useState(!0),[n,r]=s.useState(null);s.useEffect(()=>{(async()=>{var e;d(!0);try{const o=(e=(await u.get(`/admin/donate_promotions/${a}`)).data)==null?void 0:e.data;Array.isArray(o)&&o.length>0?c(o[0]):(c(null),r("Không tìm thấy khuyến mãi."))}catch(h){console.error(h),r("Lỗi khi tải khuyến mãi.")}finally{d(!1)}})()},[a]);const y=async i=>{l(!0);try{i.append("_method","put");const e=await u.post(`/admin/donate_promotions/${a}`,i,{headers:{"Content-Type":"multipart/form-data"}});(e.status===200||e.status===201)&&x("/admin/donatePromotions")}catch(e){console.error(e),r("Cập nhật thất bại.")}finally{l(!1)}};return p?t.jsx("div",{className:"flex justify-center items-center h-64",children:t.jsx(v,{className:"animate-spin text-blue-500",size:48})}):t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center h-14",children:[t.jsx("div",{className:"flex items-center  ",children:t.jsxs(N,{to:"/admin/donatePromotions",className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",children:[t.jsx(b,{size:20}),"Quay lại danh sách"]})}),t.jsx("h2",{className:"text-2xl font-semibold mb-4 ml-4 mt-3 text-gray-700",children:"Thêm sản phẩm mới"})]}),n&&t.jsx("div",{className:"bg-red-100 text-red-700 p-3 rounded-md mb-4",children:n}),m?t.jsx(P,{initialData:m,onSubmit:y,isEditing:!0,isLoading:f}):t.jsx("p",{children:n||"Không có dữ liệu để hiển thị."})]})}export{A as default};
