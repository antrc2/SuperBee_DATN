import{y as g,l as j,r as s,j as t,z as v,m as N,x as P,e as u}from"./index-BDAcJp4Y.js";import{D as b}from"./DonatePromotionForm-CCffPmAO.js";function S(){const{id:a}=g(),x=j(),[c,m]=s.useState(null),[f,l]=s.useState(!1),[p,d]=s.useState(!0),[n,i]=s.useState(null);s.useEffect(()=>{(async()=>{var e;d(!0);try{const o=(e=(await u.get(`/admin/donate_promotions/${a}`)).data)==null?void 0:e.data;Array.isArray(o)&&o.length>0?m(o[0]):(m(null),i("Không tìm thấy khuyến mãi."))}catch(h){console.error(h),i("Lỗi khi tải khuyến mãi.")}finally{d(!1)}})()},[a]);const y=async r=>{l(!0);try{r.append("_method","put");const e=await u.post(`/admin/donate_promotions/${a}`,r,{headers:{"Content-Type":"multipart/form-data"}});(e.status===200||e.status===201)&&x("/admin/donatePromotions")}catch(e){console.error(e),i("Cập nhật thất bại.")}finally{l(!1)}};return p?t.jsx("div",{className:"flex justify-center items-center h-64",children:t.jsx(v,{className:"animate-spin text-blue-500",size:48})}):t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center h-14",children:[t.jsx("div",{className:"flex items-center  ",children:t.jsxs(N,{to:"/admin/donatePromotions",className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",children:[t.jsx(P,{size:20}),"Quay lại danh sách"]})}),t.jsx("h2",{className:"text-2xl font-semibold mb-4 ml-4 mt-3 text-gray-700",children:"Thêm sản phẩm mới"})]}),n&&t.jsx("div",{className:"bg-red-100 text-red-700 p-3 rounded-md mb-4",children:n}),c?t.jsx(b,{initialData:c,onSubmit:y,isEditing:!0,isLoading:f}):t.jsx("p",{children:n||"Không có dữ liệu để hiển thị."})]})}export{S as default};
