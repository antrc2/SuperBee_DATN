import{h as b,b as v,u as N,r as i,j as e,i as S,L as C,f as x}from"./index-OefKdV4-.js";import{C as A}from"./CreateFormProducts-D-m68v-N.js";import{A as E}from"./arrow-left-C_QBwxTB.js";import"./eye-off-v4p3ouL9.js";import"./circle-plus-CWV9GHCb.js";import"./image-plus-DkKzxBFE.js";function I(){const{id:c}=b(),f=v(),{pop:a}=N(),[r,u]=i.useState(null),[g,m]=i.useState(!1),[y,h]=i.useState(!0),[l,o]=i.useState(null);i.useEffect(()=>{(async()=>{h(!0);try{const s=(await x.get(`/admin/products/${c}`)).data.data;if(Array.isArray(s)&&s.length>0){const t=s[0];t.game_attributes&&!Array.isArray(t.game_attributes)&&(t.game_attributes=[t.game_attributes]),u(t)}else u(null),o("Sản phẩm không tồn tại."),a("Sản phẩm không tồn tại.","e")}catch(n){console.error(n);const s="Không tìm thấy sản phẩm hoặc có lỗi xảy ra.";o(s),a(s,"e")}finally{h(!1)}})()},[c,a]);const j=async d=>{var n,s;m(!0),o(null);try{d.append("_method","put");const t=await x.post(`/admin/products/${c}`,d,{headers:{"Content-Type":"multipart/form-data"}});(t.status===201||t.status===200)&&(a("Cập nhật sản phẩm thành công!","s"),f("/admin/products"))}catch(t){console.error(t);const p=((s=(n=t.response)==null?void 0:n.data)==null?void 0:s.message)||"Cập nhật thất bại, vui lòng thử lại.";o(p),a(p,"e")}finally{m(!1)}};return y?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(S,{className:"animate-spin text-blue-500",size:48})}):e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center h-14",children:e.jsx("div",{className:"flex items-center  ",children:e.jsxs(C,{to:"/admin/products",className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",children:[e.jsx(E,{size:20}),"Quay lại danh sách"]})})}),e.jsxs("h2",{className:"text-2xl font-semibold mb-4 text-xl-700",children:["Chỉnh sửa sản phẩm: #",r==null?void 0:r.sku]}),l&&e.jsx("div",{className:"bg-red-100 text-red-700 p-3 rounded-md mb-4",children:l}),r?e.jsx(A,{initialData:r,onSubmit:j,isEditing:!0,isLoading:g}):e.jsx("p",{children:l||"Không có dữ liệu để hiển thị."})]})}export{I as default};
