import{k,d as j,u as w,r as n,j as t,l as v,h as x}from"./index-DNv7UJt1.js";import{C as N}from"./CreateFormProductsPartner-BQEnvofA.js";import"./eye-off-BSEKuVup.js";import"./circle-plus-DWEIKw-4.js";import"./image-plus-D6xie-EY.js";function L(){const{id:o}=k(),l=j(),{pop:r}=w(),[s,u]=n.useState(null),[b,h]=n.useState(!1),[f,m]=n.useState(!0),[d,i]=n.useState(null);n.useEffect(()=>{(async()=>{m(!0);try{const e=(await x.get(`/partner/products/${o}`)).data.data;e&&e.id?(e.game_attributes&&!Array.isArray(e.game_attributes)&&(e.game_attributes=[e.game_attributes]),e.credentials||(e.credentials=[]),e.images||(e.images=[]),e.game_attributes||(e.game_attributes=[]),u(e)):(u(null),i("Sản phẩm không tồn tại."),r("Sản phẩm không tồn tại.","e"))}catch(a){console.error(a);const e="Không tìm thấy sản phẩm hoặc có lỗi xảy ra.";i(e),r(e,"e")}finally{m(!1)}})()},[o,r]);const y=async c=>{var a,e;h(!0),i(null);try{c.append("_method","put"),await x.post(`/partner/products/${o}`,c,{headers:{"Content-Type":"multipart/form-data"}}),r("Cập nhật sản phẩm thành công!","s"),l("/partner/products")}catch(g){console.error(g);const p=((e=(a=g.response)==null?void 0:a.data)==null?void 0:e.message)||"Cập nhật thất bại, vui lòng thử lại.";i(p),r(p,"e")}finally{h(!1)}};return f?t.jsx("div",{className:"flex justify-center items-center h-64",children:t.jsx(v,{className:"animate-spin text-blue-500",size:48})}):t.jsxs("div",{className:"p-4 mx-auto max-w-(--breakpoint-2xl) md:p-6",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[t.jsxs("button",{type:"button",onClick:()=>l(-1),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white px-3 py-2 rounded-lg transition border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 shadow",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),t.jsx("span",{className:"font-medium",children:"Quay lại"})]}),t.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 ml-2",children:["Chỉnh sửa sản phẩm: #",s==null?void 0:s.sku]})]}),d&&t.jsx("div",{className:"rounded-lg p-3 mb-4 border bg-red-50 dark:bg-red-900 text-red-700 dark:text-red-300 border-red-200 dark:border-red-700",children:d}),t.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-lg border border-gray-200 dark:border-gray-800 p-6",children:s?t.jsx(N,{initialData:s,onSubmit:y,isEditing:!0,isLoading:b}):t.jsx("p",{children:d||"Không có dữ liệu để hiển thị."})})]})}export{L as default};
