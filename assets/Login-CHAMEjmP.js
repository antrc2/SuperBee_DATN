import{r as a,b as y,j as e,N as w,g as v,L as d,C as k,E as C}from"./index-CBuA2RNo.js";import{u as E}from"./index.esm-BmWlcHL9.js";import{E as S}from"./eye-off-B0ZnyQpX.js";function O(){const[T,A]=a.useState(0),[l,h]=a.useState(!1),[x,L]=a.useState(""),[p,I]=a.useState(!1);a.useRef(null);const{login:u,loading:i,user:g}=y(),f=localStorage.getItem("web_id")||1,{register:r,handleSubmit:b,formState:{errors:n},setError:o,clearErrors:c}=E();if(g)return e.jsx(w,{to:"/",replace:!0});const j=async t=>{c();const s=await u({...t,web_id:f});s.success||(s.validationErrors&&Object.entries(s.validationErrors).forEach(([N,m])=>{o(N,{type:"server",message:Array.isArray(m)?m[0]:m})}),s.code==="INVALID_CREDENTIALS"&&(o("username",{type:"server",message:s.message||"Tên đăng nhập hoặc mật khẩu không đúng"}),o("password",{type:"server",message:s.message||"Tên đăng nhập hoặc mật khẩu không đúng"})),(s.code==="NO_ACTIVE"||s.code==="LOCKED_ACCOUNT"||s.code==="INVALID_STATUS")&&o("username",{type:"server",message:s.message}))};return i?e.jsx(v,{}):e.jsxs("div",{className:"flex flex-col flex-1 w-full overflow-y-auto lg:w-1/2 no-scrollbar",children:[e.jsx("div",{className:"w-full max-w-md mx-auto mb-5 sm:pt-10",children:e.jsxs(d,{to:"/",className:"inline-flex items-center text-sm text-secondary hover:text-primary transition-colors",children:[e.jsx(k,{className:"size-5"}),"Quay lại trang chủ"]})}),e.jsx("div",{className:"flex flex-col justify-center flex-1 w-full max-w-md mx-auto px-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"mb-5 sm:mb-8",children:[e.jsx("h1",{className:"font-heading mb-2 font-semibold text-primary text-title-sm sm:text-title-md",children:"Đăng Nhập"}),e.jsx("p",{className:"text-sm text-secondary",children:"Chào mừng bạn trở lại! Vui lòng nhập thông tin."})]}),e.jsx("form",{onSubmit:b(j),children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"username",className:"block text-sm font-medium text-primary mb-1",children:["Tên đăng nhập",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"username",placeholder:"Nhập tên đăng nhập của bạn",className:"block w-full px-4 py-[12px] text-sm rounded-lg border-hover placeholder-theme bg-input text-input",...r("username",{required:"Tên đăng nhập là bắt buộc"}),onChange:t=>{c("username"),r("username").onChange(t)}}),n.username&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:n.username.message})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"password",className:"block text-sm font-medium text-primary mb-1",children:["Mật khẩu",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:l?"text":"password",id:"password",placeholder:"Nhập mật khẩu của bạn",className:"block w-full px-4 py-[12px] text-sm rounded-lg border-hover placeholder-theme pr-10 bg-input text-input",...r("password",{required:"Mật khẩu là bắt buộc"}),onChange:t=>{c("password"),r("password").onChange(t)}}),e.jsx("span",{onClick:()=>h(!l),className:"absolute z-10 -translate-y-1/2 cursor-pointer right-4 top-1/2 text-secondary",children:l?e.jsx(C,{className:"size-5"}):e.jsx(S,{className:"size-5"})})]}),n.password&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:n.password.message})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"font-heading flex items-center justify-center w-full px-4 py-3 text-sm font-bold rounded-lg transition-all text-accent-contrast bg-gradient-button hover:brightness-110 disabled:opacity-50 disabled:cursor-not-allowed",disabled:i||p&&!x,children:i?"Đang đăng nhập...":"Đăng Nhập"})})]})}),e.jsxs("div",{className:"mt-5 flex items-center justify-between flex-wrap gap-y-2",children:[e.jsxs("p",{className:"text-sm font-normal text-secondary",children:["Chưa có tài khoản?"," ",e.jsx(d,{to:"/auth/register",className:"font-heading font-semibold transition-colors text-highlight hover:brightness-125",children:"Đăng ký"})]}),e.jsx("p",{className:"text-sm font-normal",children:e.jsx(d,{to:"/forgot-password",className:"font-heading font-semibold transition-colors text-secondary hover:text-highlight",children:"Quên mật khẩu?"})})]})]})})]})}export{O as default};
