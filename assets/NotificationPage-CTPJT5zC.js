import{f as w,r as c,j as e,S,aQ as T,aR as k,ak as m}from"./index-C2fgkNUe.js";import{B as C}from"./Breadcrumbs-DxY15NWR.js";const b=5,F=({currentPage:t,pageCount:l,onPageChange:x})=>{if(l<=1)return null;const o=a=>{a>=1&&a<=l&&x(a)},u=()=>{const a=[],r=e.jsx("span",{className:"px-4 py-2 text-secondary",children:"..."},"ellipsis");if(l<=7)for(let n=1;n<=l;n++)a.push(e.jsx("button",{onClick:()=>o(n),className:m("px-4 py-2 rounded-lg text-sm w-auto",{"action-button-primary shadow-md":n===t,"border-hover bg-input text-secondary":n!==t}),children:n},n));else{a.push(e.jsx("button",{onClick:()=>o(1),className:m("px-4 py-2 rounded-lg text-sm w-auto",{"action-button-primary shadow-md":t===1,"border-hover bg-input text-secondary":t!==1}),children:"1"},1)),t>3&&a.push(r);let n=Math.max(2,t-1),h=Math.min(l-1,t+1);for(let i=n;i<=h;i++)a.push(e.jsx("button",{onClick:()=>o(i),className:m("px-4 py-2 rounded-lg text-sm w-auto",{"action-button-primary shadow-md":i===t,"border-hover bg-input text-secondary":i!==t}),children:i},i));t<l-2&&a.push(r),a.push(e.jsx("button",{onClick:()=>o(l),className:m("px-4 py-2 rounded-lg text-sm w-auto",{"action-button-primary shadow-md":l===t,"border-hover bg-input text-secondary":l!==t}),children:l},l))}return a};return e.jsxs("div",{className:"mt-8 flex justify-center items-center space-x-2",children:[e.jsx("button",{onClick:()=>o(t-1),disabled:t===1,className:"px-4 py-2 rounded-lg border-hover bg-input text-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Trước"}),u(),e.jsx("button",{onClick:()=>o(t+1),disabled:t===l,className:"px-4 py-2 rounded-lg border-hover bg-input text-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Sau"})]})},M=()=>{const{notifications:t}=w(),[l,x]=c.useState(""),[o,u]=c.useState("all"),[a,j]=c.useState("all"),[r,n]=c.useState("newest"),[h,i]=c.useState(1),f=c.useMemo(()=>{let s=[...(t==null?void 0:t.notifications)||[]];if(l&&(s=s.filter(d=>d.content.toLowerCase().includes(l.toLowerCase()))),o!=="all"&&(s=s.filter(d=>d.type===o)),a!=="all"){const d=a==="read";s=s.filter(p=>p.is_read===d)}return s.sort((d,p)=>{const v=new Date(d.published_at),N=new Date(p.published_at);return r==="newest"?N-v:v-N}),s},[l,o,r,t,a]);c.useEffect(()=>{i(1)},[l,o,r,a]);const g=Math.ceil(f.length/b),y=f.slice((h-1)*b,h*b);return e.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("h1",{className:"text-3xl md:text-4xl font-bold font-heading",children:"Trung tâm Thông báo"})}),e.jsx(C,{})]}),e.jsx("div",{className:"section-bg mb-8 p-4 sm:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("label",{htmlFor:"search",className:"block text-sm font-semibold text-secondary mb-2",children:"Tìm kiếm thông báo"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:e.jsx(S,{className:"w-5 h-5 text-secondary"})}),e.jsx("input",{type:"search",id:"search",placeholder:"Nhập nội dung cần tìm...",className:"w-full pl-10 pr-4 py-3 bg-input text-input border-hover rounded-lg placeholder-theme focus:outline-none",value:l,onChange:s=>x(s.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"type",className:"block text-sm font-semibold text-secondary mb-2",children:"Loại thông báo"}),e.jsxs("select",{id:"type",className:"w-full px-4 py-3 bg-input text-input border-hover rounded-lg focus:outline-none",value:o,onChange:s=>u(s.target.value),children:[e.jsx("option",{value:"all",children:"Tất cả"}),Object.values(T).filter(s=>s.showInFilter).map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"readStatus",className:"block text-sm font-semibold text-secondary mb-2",children:"Trạng thái"}),e.jsxs("select",{id:"readStatus",className:"w-full px-4 py-3 bg-input text-input border-hover rounded-lg focus:outline-none",value:a,onChange:s=>j(s.target.value),children:[e.jsx("option",{value:"all",children:"Tất cả"}),e.jsx("option",{value:"unread",children:"Chưa đọc"}),e.jsx("option",{value:"read",children:"Đã đọc"})]})]}),e.jsxs("div",{className:"md:col-start-2 lg:col-start-auto",children:[e.jsx("label",{htmlFor:"sort",className:"block text-sm font-semibold text-secondary mb-2",children:"Sắp xếp theo"}),e.jsxs("select",{id:"sort",className:"w-full px-4 py-3 bg-input text-input border-hover rounded-lg focus:outline-none",value:r,onChange:s=>n(s.target.value),children:[e.jsx("option",{value:"newest",children:"Mới nhất"}),e.jsx("option",{value:"oldest",children:"Cũ nhất"})]})]})]})}),e.jsx("div",{className:"space-y-4",children:y.length>0?y.map(s=>e.jsx(k,{notification:s},s.id)):e.jsx("div",{className:"text-center py-16 section-bg rounded-lg",children:e.jsx("p",{className:"text-secondary",children:"Không tìm thấy thông báo nào phù hợp."})})}),e.jsx(F,{currentPage:h,pageCount:g,onPageChange:i})]})};export{M as default};
