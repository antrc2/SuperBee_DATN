import{r as c,k as N,l as j,j as e,C as b,L as p,H as g,e as f}from"./index-BDAcJp4Y.js";import{C as y,B as v}from"./CardRechargeForm-CMlm62Wh.js";import"./index.esm-BAv2rN91.js";import"./recharge-7Wy_Gsf5.js";function L(){var d,x,h,m;const[n,l]=c.useState("card"),{user:r}=N(),i=j(),[s,u]=c.useState([]),o=t=>{const a=Number(t);return isNaN(a)?"0 ₫":new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(a)};return c.useEffect(()=>{r===null?(localStorage.setItem("location","/recharge-atm"),i("/auth/login")):r&&(async()=>{try{const a=await f.get("/donate/history");u(a.data),console.log("Lịch sử nạp tiền:",a.data)}catch(a){console.error("Lỗi khi tải lịch sử nạp:",a)}})()},[r,i]),e.jsx("div",{className:"min-h-screen py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsx("h1",{className:"font-heading text-3xl font-bold text-center text-primary mb-8",children:"Nạp Tiền Vào Tài Khoản"}),e.jsxs("div",{className:"mb-8 flex justify-center border-b border-themed",children:[e.jsxs("button",{onClick:()=>l("card"),className:`tab-button !flex-none ${n==="card"?"tab-button-active":""}`,children:[e.jsx(b,{size:18,className:"inline mr-2"})," Nạp Thẻ Cào"]}),e.jsxs("button",{onClick:()=>l("bank"),className:`tab-button !flex-none ${n==="bank"?"tab-button-active":""}`,children:[e.jsx(p,{size:18,className:"inline mr-2"})," Nạp Qua Ngân Hàng"]})]}),n==="card"?e.jsx(y,{}):e.jsx(v,{user:r}),e.jsxs("div",{className:"mt-12",children:[e.jsxs("h2",{className:"font-heading text-2xl font-semibold text-primary mb-6 flex items-center",children:[e.jsx(g,{size:24,className:"mr-3 text-highlight"})," Lịch Sử Nạp Tiền"]}),e.jsx("div",{className:"bg-content rounded-lg shadow-lg overflow-x-auto",children:s.status==!0?e.jsxs("table",{className:"w-full min-w-[600px] text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 text-center",children:"Người dùng"}),e.jsx("th",{className:"p-4 text-center",children:"Số Tiền"}),e.jsx("th",{className:"p-4 text-center",children:"Ngày"}),e.jsx("th",{className:"p-4 text-center",children:"Trạng Thái"})]})}),e.jsx("tbody",{children:n==="card"?(x=(d=s==null?void 0:s.data)==null?void 0:d.cards)==null?void 0:x.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:t.wallet_transaction.wallet.user.username}),e.jsx("td",{className:"text-center",children:o(t.amount)}),e.jsx("td",{className:"text-center",children:new Date(t.created_at).toLocaleString("vi-VN")}),e.jsx("td",{className:"text-center",children:t.status==1?"Thành công":"Thất bại"})]},t.id)):(m=(h=s==null?void 0:s.data)==null?void 0:h.banks)==null?void 0:m.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:t.wallet_transaction.wallet.user.username}),e.jsx("td",{className:"text-center",children:o(t.amount)}),e.jsx("td",{className:"text-center",children:new Date(t.created_at).toLocaleString("vi-VN")}),e.jsx("td",{className:"text-center",children:t.status==1?"Thành công":"Thất bại"})]},t.id))})]}):e.jsx("p",{className:"p-6 text-center text-secondary",children:"Chưa có lịch sử nạp tiền."})})]})]})})}export{L as default};
