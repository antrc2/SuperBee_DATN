import{r as j,b as N,m as y,j as e,g as v,L as m,C as w,E as k}from"./index-D48GFfOH.js";import{u as E}from"./index.esm-CdsipSeh.js";import{E as C}from"./eye-off-CeKqTFKh.js";function F(){const[n,c]=j.useState(!1),{register:d,loading:l}=N(),x=y(),{register:t,handleSubmit:h,formState:{errors:a},clearErrors:r,setError:p}=E({}),u=()=>new URLSearchParams(x.search).get("aff")||null,g=async s=>{r();const f=u(),i=await d({...s,aff:f});!i.success&&i.validationErrors&&Object.entries(i.validationErrors).forEach(([b,o])=>{p(b,{type:"server",message:Array.isArray(o)?o[0]:o})})};return l?e.jsx(v,{}):e.jsxs("div",{className:"flex flex-col flex-1 w-full overflow-y-auto lg:w-1/2 no-scrollbar ",children:[e.jsx("div",{className:"w-full max-w-md mx-auto mb-5 sm:pt-10",children:e.jsxs(m,{to:"/",className:"inline-flex items-center text-sm text-secondary hover:text-primary transition-colors",children:[e.jsx(w,{className:"size-5"}),"Quay lại trang chủ"]})}),e.jsx("div",{className:"flex flex-col justify-center flex-1 w-full max-w-md mx-auto px-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"mb-5 sm:mb-8",children:[e.jsx("h1",{className:"font-heading mb-2 font-semibold text-primary text-title-sm sm:text-title-md",children:"Đăng Ký"}),e.jsx("p",{className:"text-sm text-secondary",children:"Nhập thông tin của bạn để tạo tài khoản mới!"})]}),e.jsx("form",{onSubmit:h(g),children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"username",className:"block text-sm font-medium text-primary mb-1",children:["Tên đăng nhập",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"username",placeholder:"Nhập tên đăng nhập",className:"block w-full px-4 py-[12px] text-sm rounded-lg border-hover placeholder-theme bg-input text-input",...t("username",{required:"Tên đăng nhập là bắt buộc",minLength:{value:3,message:"Tên đăng nhập phải có ít nhất 3 ký tự"}}),onChange:s=>{r("username"),t("username").onChange(s)}}),a.username&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.username.message})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-primary mb-1",children:["Email",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",id:"email",placeholder:"Nhập email của bạn",className:"block w-full px-4 py-[12px] text-sm rounded-lg border-hover placeholder-theme bg-input text-input",...t("email",{required:"Email là bắt buộc",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,message:"Địa chỉ email không hợp lệ"}}),onChange:s=>{r("email"),t("email").onChange(s)}}),a.email&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.email.message})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"password",className:"block text-sm font-medium text-primary mb-1",children:["Mật khẩu",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:n?"text":"password",id:"password",placeholder:"Nhập mật khẩu",className:"block w-full px-4 py-[12px] text-sm rounded-lg border-hover placeholder-theme pr-10 bg-input text-input",...t("password",{required:"Mật khẩu là bắt buộc",minLength:{value:6,message:"Mật khẩu phải có ít nhất 6 ký tự"}}),onChange:s=>{r("password"),t("password").onChange(s)}}),e.jsx("span",{onClick:()=>c(!n),className:"absolute z-10 -translate-y-1/2 cursor-pointer right-4 top-1/2 text-secondary",children:n?e.jsx(k,{className:"size-5"}):e.jsx(C,{className:"size-5"})})]}),a.password&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.password.message})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"font-heading flex items-center justify-center w-full px-4 py-3 text-sm font-bold rounded-lg transition-all text-accent-contrast bg-gradient-button hover:brightness-110 disabled:opacity-50 disabled:cursor-not-allowed",disabled:l,children:l?"Đang xử lý...":"Đăng Ký"})})]})}),e.jsx("div",{className:"mt-5",children:e.jsxs("p",{className:"text-sm font-normal text-center text-secondary sm:text-start",children:["Đã có tài khoản?"," ",e.jsx(m,{to:"/auth/login",className:"font-heading font-semibold transition-colors text-highlight hover:brightness-125",children:"Đăng nhập ngay"})]})})]})})]})}export{F as default};
