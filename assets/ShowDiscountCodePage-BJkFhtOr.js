import{k,d as b,u as f,r as o,j as e,g as N,L as m,h as p}from"./index-DJ8jfsRI.js";const v=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 mr-2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),w=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 mr-2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),L=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"})}),_=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m-7.5-2.962c.51.054.994.093 1.485.127a18.154 18.154 0 010 2.863m-7.5 0a9.094 9.094 0 013.741-.479 3 3 0 014.682-2.72M13.5 5.25h3V7.5h-3V5.25zm-8.25 5.25h3V13.5h-3V10.5z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),a=({label:n,value:t,children:d,className:s=""})=>t===null||t===void 0&&!d?null:e.jsxs("div",{className:`px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6 ${s}`,children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:n}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900 dark:text-white sm:col-span-2 sm:mt-0",children:d||t})]}),A=({status:n})=>{const t=n===1,d=t?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";return e.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${d}`,children:t?"Kích hoạt":"Ẩn"})},M=()=>{var x;const{id:n}=k(),t=b(),{pop:d}=f(),[s,h]=o.useState(null),[u,y]=o.useState(!0);o.useEffect(()=>{(async()=>{try{const g=await p.get(`/admin/discountcode/${n}`);h(g.data.data)}catch{d("Không thể tải thông tin khuyến mãi.","e"),t("/admin/discountcode")}finally{y(!1)}})()},[n,t,d]);const c=r=>r==null?"N/A":new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(r),i=r=>r?new Date(r).toLocaleString("vi-VN",{dateStyle:"long",timeStyle:"short"}):"N/A";if(u)return e.jsx(N,{});if(!s)return e.jsx("div",{className:"flex justify-center items-center h-screen bg-slate-50 dark:bg-gray-900 text-red-500",children:"Không có dữ liệu để hiển thị."});const j=s.user_id===-1,l=s.user;return e.jsx("div",{className:"font-sans bg-slate-50 dark:bg-gray-900 min-h-screen p-4 sm:p-6 lg:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsxs("button",{type:"button",onClick:()=>t(-1),className:"flex items-center text-sm font-medium text-gray-600 hover:text-sky-600 dark:text-gray-400 dark:hover:text-sky-400 mb-2",children:[e.jsx(v,{}),"Quay lại danh sách"]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Chi tiết Khuyến Mãi"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsxs(m,{to:`/admin/discountcode/${n}/edit`,className:"w-full sm:w-auto inline-flex justify-center items-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-lg text-white bg-sky-600 hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500 dark:focus:ring-offset-gray-900",children:[e.jsx(w,{}),"Chỉnh sửa"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-xl rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-5 sm:px-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("h3",{className:"text-xl leading-6 font-bold text-gray-900 dark:text-white",children:["Mã:"," ",e.jsx("span",{className:"font-mono text-sky-600 dark:text-sky-400",children:s.code})]}),e.jsx("p",{className:"mt-1 max-w-2xl text-sm text-gray-500 dark:text-gray-400",children:s.description||"Không có mô tả."})]}),e.jsxs("dl",{children:[e.jsx(a,{label:"Trạng thái",className:"bg-gray-50 dark:bg-gray-800/50",children:e.jsx(A,{status:s.status})}),e.jsx(a,{label:"Phần trăm giảm",value:`${s.discount_value}%`}),e.jsx(a,{label:"Ngày bắt đầu",value:i(s.start_date),className:"bg-gray-50 dark:bg-gray-800/50"}),e.jsx(a,{label:"Ngày kết thúc",value:i(s.end_date)}),e.jsx(a,{label:"Tổng lượt đã dùng",value:s.total_used,className:"bg-gray-50 dark:bg-gray-800/50"}),e.jsx(a,{label:"Tổng lượt sử dụng",value:s.usage_limit===-1?"Không giới hạn":s.usage_limit}),e.jsx(a,{label:"Lượt dùng/Người",value:s.per_user_limit===-1?"Không giới hạn":s.per_user_limit,className:"bg-gray-50 dark:bg-gray-800/50"}),e.jsx(a,{label:"Giảm tối thiểu",value:c(s.min_discount_amount)}),e.jsx(a,{label:"Giảm tối đa",value:c(s.max_discount_amount),className:"bg-gray-50 dark:bg-gray-800/50"})]})]})}),e.jsxs("div",{className:"lg:col-span-1 space-y-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-xl rounded-lg overflow-hidden",children:[e.jsx("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h3",{className:"text-lg font-semibold leading-6 text-gray-900 dark:text-gray-100 flex items-center",children:"Đối tượng áp dụng"})}),j?e.jsxs("div",{className:"p-6 flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"p-3 bg-sky-100 dark:bg-sky-900/50 rounded-full",children:e.jsx(_,{className:"w-8 h-8 text-sky-600 dark:text-sky-400"})}),e.jsx("p",{className:"mt-4 font-semibold text-gray-800 dark:text-gray-200",children:"Tất cả người dùng"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Mã khuyến mãi này áp dụng cho mọi khách hàng."})]}):e.jsxs("div",{className:"p-6 flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"p-3 bg-indigo-100 dark:bg-indigo-900/50 rounded-full",children:e.jsx(L,{className:"w-8 h-8 text-indigo-600 dark:text-indigo-400"})}),e.jsx("p",{className:"mt-4 font-semibold text-gray-800 dark:text-gray-200",children:"Người dùng cá nhân"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ID: ",s.user_id]}),e.jsx(m,{to:`/admin/users/${s.user_id}`,className:"mt-2 text-sky-600 dark:text-sky-400 hover:underline text-sm font-medium",children:"Xem chi tiết người dùng →"})]})]}),l&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-xl rounded-lg overflow-hidden",children:[e.jsx("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h3",{className:"text-lg font-semibold leading-6 text-gray-900 dark:text-gray-100 flex items-center",children:"Người tạo"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{className:"h-16 w-16 rounded-full object-cover",src:l.avatar_url,alt:`Avatar of ${l.username}`,onError:r=>{r.target.onerror=null,r.target.src="https://placehold.co/64x64/e2e8f0/64748b?text=User"}}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-gray-900 dark:text-white",children:l.username}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:l.email})]})]}),e.jsx("div",{className:"mt-4 border-t border-gray-200 dark:border-gray-700 pt-4",children:e.jsxs("dl",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("dt",{className:"text-gray-500 dark:text-gray-400",children:"Website"}),e.jsx("dd",{className:"text-gray-700 dark:text-gray-300 font-mono",children:((x=l.web)==null?void 0:x.subdomain)||"N/A"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("dt",{className:"text-gray-500 dark:text-gray-400",children:"Ngày tạo"}),e.jsx("dd",{className:"text-gray-700 dark:text-gray-300",children:i(s.created_at)})]})]})})]})]})]})]})]})})};export{M as default};
