import{k as p,r as n,j as s,g as j,L as g,h as u}from"./index-b9nMIW9s.js";import{A as N}from"./arrow-left-D1PXFbll.js";function y(){const{id:i}=p(),[c,x]=n.useState(null),[m,o]=n.useState(!0);if(n.useEffect(()=>{(async()=>{try{const r=await u.get(`/admin/orders/${i}`);x(r.data.data)}catch(r){console.error("Lỗi:",r)}finally{o(!1)}})()},[i]),m)return s.jsx(j,{});if(!c)return s.jsx("div",{className:"text-center p-6",children:"Không tìm thấy đơn hàng."});const{items:h,user:t,wallet_transaction:d,...e}=c;return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs(g,{to:"/admin/orders",className:"flex items-center gap-2 text-sm-600 hover:text-sm-900",children:[s.jsx(N,{size:20}),"Quay lại danh sách"]})}),s.jsxs("h1",{className:"text-2xl font-bold text-sm-900",children:["Chi tiết đơn hàng #",e.order_code]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"p-4 rounded-lg border transition-all bg-orange-400/10 border-orange-400/30",children:[s.jsx("p",{className:"text-sm text-yellow-700",children:"Tổng tiền"}),s.jsxs("p",{className:"text-2xl font-bold text-yellow-800",children:[e.total_amount,"đ"]})]}),s.jsxs("div",{className:"p-4 rounded-lg border transition-all bg-green-400/10 border-green-400/30",children:[s.jsx("p",{className:"text-sm text-red-700",children:"Khuyến mãi"}),s.jsxs("p",{className:"text-2xl font-bold text-red-800",children:[e.discount_amount||0,"đ"]})]}),s.jsxs("div",{className:"p-4 rounded-lg border transition-all bg-gray-400/10 border-gray-400/30",children:[s.jsx("p",{className:"text-sm text-blue-700",children:"Ngày đặt"}),s.jsx("p",{className:"text-2xl font-bold text-blue-800",children:new Date(e.created_at).toLocaleString("vi-VN")})]})]}),s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"col-span-2 rounded-lg border transition-all border-themed/50 shadow p-6 space-y-2",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Thông tin đơn hàng"}),s.jsxs("div",{className:"grid sm:grid-cols-2 gap-y-3 text-sm text-sm-700",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-sm-500",children:"Mã đơn hàng:"})," ",e.order_code]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-sm-500",children:"Trạng thái:"})," ",s.jsx("span",{className:`ml-1 px-2 py-0.5 rounded-full text-xs font-medium ${e.status===1?"text-green-800 bg-green-100":"text-red-800 bg-red-100"}`,children:e.status===1?"Hoàn tất":"Đang xử lý"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-sm-500",children:"Khuyến mãi áp dụng:"})," ",e.promo_code||"Không có"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-sm-500",children:"Loại giao dịch:"})," ",(d==null?void 0:d.type)||"Không rõ"]})]})]}),s.jsxs("div",{className:"rounded-lg border shadow transition-all border-themed/50 p-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Người mua"}),s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("img",{src:t.avatar_url,alt:"avatar",className:"w-12 h-12 rounded-full object-cover"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:t.username}),s.jsxs("p",{className:"text-xs text-sm-500",children:["ID: ",t.id]})]})]}),s.jsxs("div",{className:"text-sm space-y-1 text-sm-700",children:[s.jsxs("p",{className:"text-sm font-medium",children:["Email: ",t.email]}),s.jsxs("p",{className:"text-sm font-medium",children:["SĐT: ",t.phone||"Chưa có"]}),s.jsxs("p",{children:["Trạng thái:"," ",t.status===1?s.jsx("span",{className:"text-green-600 font-medium",children:"Hoạt động"}):s.jsx("span",{className:"text-red-600 font-medium",children:"Ngưng"})]})]})]})]}),s.jsxs("div",{className:"rounded-lg border shadow transition-all border-themed/50 p-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Danh sách sản phẩm"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full text-sm text-left",children:[s.jsx("thead",{className:"rounded-lg border transition-all border-themed/50 shadow text-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2",children:"SKU"}),s.jsx("th",{className:"px-4 py-2",children:"Giá nhập"}),s.jsx("th",{className:"px-4 py-2",children:"Giá bán"}),s.jsx("th",{className:"px-4 py-2",children:"Thuộc tính"})]})}),s.jsx("tbody",{children:h.map(a=>{var r;return s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"px-4 py-2 text-sm-500",children:a.product.sku}),s.jsxs("td",{className:"px-4 py-2 text-sm-500",children:[a.unit_price,"đ"]}),s.jsxs("td",{className:"px-4 py-2 text-sm-500",children:[a.product.price,"đ"]}),s.jsx("td",{className:"px-4 py-2 text-sm-500",children:s.jsx("ul",{className:"list-disc pl-4 text-sm-500",children:(r=a.product.game_attributes)==null?void 0:r.map(l=>s.jsxs("li",{children:[s.jsxs("strong",{children:[l.attribute_key,":"]})," ",l.attribute_value]},l.id))})})]},a.id)})})]})})]})]})}export{y as default};
