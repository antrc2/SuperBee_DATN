import{j as e,L as N,E as A,n as T,u as R,r as n,b as E,k as K,f,e as _}from"./index-OefKdV4-.js";import{L as B}from"./Layout-DUlquypf.js";import{F as G}from"./file-pen-line-CrTIA4_v.js";import{K as $}from"./key-PYdHSzzV.js";import"./Pagination-B0ANGdal.js";import"./chevron-left-DzZmHbAx.js";import"./chevron-right-C6ZOff9V.js";import"./plus-B6PeJhiB.js";import"./funnel-C6BL2nPh.js";function M({products:c,handleKey:h,handleLock:o}){return e.jsx("div",{className:"overflow-x-auto p-4 bg-transparent",children:e.jsxs("table",{className:"min-w-full rounded-xl shadow-lg overflow-hidden bg-white dark:bg-gray-900",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-4 px-4 text-center text-sm font-bold text-gray-700 dark:text-gray-100 tracking-wide",children:"SKU"}),e.jsx("th",{className:"py-4 px-4 text-center text-sm font-bold text-gray-700 dark:text-gray-100 tracking-wide",children:"T√™n s·∫£n ph·∫©m (T·∫°m)"}),e.jsx("th",{className:"py-4 px-4 text-center text-sm font-bold text-gray-700 dark:text-gray-100 tracking-wide",children:"Gi√°"}),e.jsx("th",{className:"py-4 px-4 text-center text-sm font-bold text-gray-700 dark:text-gray-100 tracking-wide",children:"Tr·∫°ng th√°i"}),e.jsx("th",{className:"py-4 px-4 text-center text-sm font-bold text-gray-700 dark:text-gray-100 tracking-wide",children:"H√†nh ƒë·ªông"})]})}),e.jsx("tbody",{children:c.map(t=>e.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-100 dark:hover:bg-gray-800 transition",children:[e.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-900 dark:text-gray-100 font-mono tracking-wider",children:t.sku}),e.jsxs("td",{className:"py-4 px-4 text-center text-sm text-gray-900 dark:text-gray-100",children:["S·∫£n ph·∫©m #",t.id]}),e.jsxs("td",{className:"py-4 px-4 text-center text-sm text-gray-900 dark:text-gray-100",children:[t.import_price.toLocaleString(),"ƒë"]}),e.jsx("td",{className:"py-4 px-4 text-center text-sm",children:e.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-semibold shadow-sm ${t.status===1?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":t.status===2?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300":t.status===3?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300":t.status===4?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:t.status===1?"ƒêang b√°n":t.status===2?"ƒêang ch·ªù duy·ªát":t.status===3?"ƒê√£ h·ªßy":t.status===4?"ƒê√£ b√°n":"Kh√¥ng r√µ"})}),e.jsx("td",{className:"py-4 px-4 text-center",children:e.jsxs("div",{className:"flex justify-center gap-3",children:[e.jsx(N,{to:`/partner/products/${t.id}`,title:"Xem chi ti·∫øt",children:e.jsx(A,{className:"text-green-500 hover:text-green-700 dark:text-green-400 dark:hover:text-green-200 cursor-pointer transition",size:20})}),e.jsx(N,{to:`/partner/products/${t.id}/edit`,title:"Ch·ªânh s·ª≠a",children:e.jsx(G,{className:"text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-200 cursor-pointer transition",size:20})}),e.jsx("button",{onClick:()=>t.status===2&&o(t.id),title:t.status===2?"H·ªßy B√°n":"Kh√¥ng th·ªÉ h·ªßy",disabled:t.status!==2,className:`rounded-full p-1 ${t.status===2?"":"opacity-50 cursor-not-allowed"}`,children:e.jsx(T,{className:t.status===2?"text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-200 cursor-pointer":"text-gray-400 dark:text-gray-500",size:20})}),t.status===3&&e.jsx("button",{onClick:()=>h(t.id),title:"B√°n L·∫°i",className:"rounded-full p-1",children:e.jsx($,{className:"text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-200 cursor-pointer transition",size:20})})]})})]},t.id))})]})})}const j=[{type:"select",name:"category_id",label:"Danh m·ª•c",options:[{label:"T·∫•t c·∫£",value:""},{label:"LQ",value:"18"},{label:"FF",value:"17"},{label:"Game RPG",value:"3"}]},{type:"select",name:"status",label:"Tr·∫°ng th√°i",options:[{label:"T·∫•t c·∫£",value:""},{label:"ƒêang b√°n",value:"1"},{label:"ƒê√£ kh√≥a",value:"0"}]},{type:"number_range",name:"price",label:"Kho·∫£ng gi√°",minName:"price_min",maxName:"price_max",placeholderMin:"Gi√° t·ª´",placeholderMax:"Gi√° ƒë·∫øn"}],U=["sku"],J=()=>{const{pop:c,conFim:h}=R(),[o,t]=n.useState([]),[w,u]=n.useState(!0),[L,y]=n.useState(null),[d,p]=n.useState(""),x=E(),i=K(),b=n.useMemo(()=>{const a=new URLSearchParams(i.search),r={};return j.forEach(s=>{s.type==="number_range"?(a.has(s.minName)&&(r[s.minName]=a.get(s.minName)),a.has(s.maxName)&&(r[s.maxName]=a.get(s.maxName))):a.has(s.name)&&(r[s.name]=a.get(s.name))}),r},[i.search]),m=n.useCallback(async()=>{u(!0);const a=new URLSearchParams(i.search);try{const r=await f.get("/partner/products",{params:a}),{data:s,...l}=r.data.data;t(s),y(l),c("l·∫•y d·ªØ li·ªáu th√†nh c√¥ng","s")}catch(r){c("l·∫•y d·ªØ li·ªáu th·∫•t b·∫°i","e"),console.error("L·ªói khi t·∫£i d·ªØ li·ªáu:",r),t([]),y(null)}finally{u(!1)}},[i.search]);n.useEffect(()=>{m()},[m]);const v=a=>{const r=new URLSearchParams;for(const s in a)r.set(s,a[s]);r.set("page","1"),x({search:r.toString()})},S=()=>{x({search:""})},P=a=>{const r=new URLSearchParams(i.search);r.set("page",a),x({search:r.toString()}),p("")},C=n.useMemo(()=>{if(!d)return o;const a=d.toLowerCase();return o.filter(r=>U.some(s=>{var l;return(l=r[s])==null?void 0:l.toString().toLowerCase().includes(a)}))},[o,d]),F=()=>x("/partner/products/new"),k=async(a,r,s)=>{const l=await h(s);if(console.log("üöÄ ~ handleAction ~ ok:",l),l)try{const g=`/partner/products/${r}/${a}`;await f.post(g),m()}catch(g){console.error(`L·ªói khi th·ª±c hi·ªán h√†nh ƒë·ªông ${a}:`,g)}};return w?e.jsx(_,{}):e.jsx(B,{title:e.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Danh s√°ch t√†i kho·∫£n game"}),className:"bg-white dark:bg-gray-900 rounded-xl shadow-lg border border-gray-200 dark:border-gray-800 p-6 mt-8 max-w-6xl mx-auto",showBackButton:!1,showBrowse:!1,showAddButton:!0,onAdd:F,onLocalSearch:p,initialSearchTermLocal:d,paginationMeta:L,onPageChange:P,onApplyFilters:v,onResetFilters:S,initialFilters:b,filterConfig:j,activeFilterCount:Object.keys(b).length,children:e.jsx(M,{products:C,handleKey:a=>k("restore",a,"K√≠ch ho·∫°t l·∫°i s·∫£n ph·∫©m n√†y?"),handleLock:a=>k("cancel",a,"Kh√≥a s·∫£n ph·∫©m n√†y?")})})};export{J as default};
