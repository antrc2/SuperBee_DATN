import{j as e,L as b,E as A,s as B,u as E,r as n,d as R,m as K,h as N,g as T}from"./index-C-Tm1Ach.js";import{L as U}from"./Layout-BOoN121g.js";import{F as $}from"./file-pen-line-U_xhuvCv.js";import{K as _}from"./key-BS6YjpOZ.js";import{P as L}from"./filterConfigs-C5yZOpH0.js";import"./plus-B9gQXaZ3.js";import"./funnel-Ct5Qms-8.js";function z({products:c,handleKey:m,handleLock:o}){return c.length===0?e.jsx("div",{className:"p-10 text-center text-sm text-gray-500 dark:text-gray-400",children:"Không tìm thấy sản phẩm nào."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-300",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"py-3 px-6",children:"SKU"}),e.jsx("th",{scope:"col",className:"py-3 px-6",children:"Tên sản phẩm"}),e.jsx("th",{scope:"col",className:"py-3 px-6",children:"Giá"}),e.jsx("th",{scope:"col",className:"py-3 px-6",children:"Trạng thái"}),e.jsx("th",{scope:"col",className:"py-3 px-6 text-center",children:"Hành động"})]})}),e.jsx("tbody",{children:c.map(t=>e.jsxs("tr",{className:"bg-white dark:bg-gray-800 border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600/50 transition-colors",children:[e.jsx("td",{className:"py-4 px-6 font-medium text-gray-900 dark:text-white whitespace-nowrap",children:t.sku}),e.jsxs("td",{className:"py-4 px-6",children:["Sản phẩm #",t.id]}),e.jsxs("td",{className:"py-4 px-6",children:[t.price.toLocaleString(),"đ"]}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${t.status===1?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":t.status===2?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300":t.status===3?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300":t.status===4?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":"bg-violet-100 text-violet-800 dark:bg-violet-900 dark:text-violet-300"}`,children:t.status===1?"Đang bán":t.status===2?"Chờ duyệt":t.status===3?"Không Bán":t.status===4?"Bán thành công":"Bị từ chối"})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex justify-center items-center gap-4",children:[e.jsx(b,{to:`/admin/products/${t.id}`,title:"Xem chi tiết",children:e.jsx(A,{className:"text-gray-400 hover:text-green-600 dark:hover:text-green-400 cursor-pointer",size:20})}),t.status===4||t.status==0?e.jsx("span",{className:"px-7"}):e.jsxs(e.Fragment,{children:[e.jsx(b,{to:`/admin/products/${t.id}/edit`,title:"Chỉnh sửa",children:e.jsx($,{className:"text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 cursor-pointer",size:20})}),t.status===1?e.jsx("button",{onClick:()=>o(t.id),title:"Hủy Bán",children:e.jsx(B,{className:"text-gray-400 hover:text-red-600 dark:hover:text-red-400 cursor-pointer",size:20})}):e.jsx("button",{onClick:()=>m(t.id),title:"Bán Lại",children:e.jsx(_,{className:"text-gray-400 hover:text-yellow-600 dark:hover:text-yellow-400 cursor-pointer",size:20})})]})]})})]},t.id))})]})})}const D=["sku"],q=()=>{const{pop:c,conFim:m}=E(),[o,t]=n.useState([]),[f,u]=n.useState(!0),[w,p]=n.useState(null),[h,y]=n.useState(""),d=R(),i=K(),k=n.useMemo(()=>{const s=new URLSearchParams(i.search),a={};return L.forEach(r=>{r.type==="number_range"?(s.has(r.minName)&&(a[r.minName]=s.get(r.minName)),s.has(r.maxName)&&(a[r.maxName]=s.get(r.maxName))):s.has(r.name)&&(a[r.name]=s.get(r.name))}),a},[i.search]),x=n.useCallback(async()=>{u(!0);const s=new URLSearchParams(i.search);try{const a=await N.get("/admin/products",{params:s}),{data:r,...l}=a.data.data;t(r),p(l)}catch(a){c("lấy dữ liệu thất bại","e"),console.error("Lỗi khi tải dữ liệu:",a),t([]),p(null)}finally{u(!1)}},[i.search]);n.useEffect(()=>{x()},[x]);const v=s=>{const a=new URLSearchParams;for(const r in s)a.set(r,s[r]);a.set("page","1"),d({search:a.toString()})},S=()=>{d({search:""})},C=s=>{const a=new URLSearchParams(i.search);a.set("page",s),d({search:a.toString()}),y("")},P=n.useMemo(()=>{if(!h)return o;const s=h.toLowerCase();return o.filter(a=>D.some(r=>{var l;return(l=a[r])==null?void 0:l.toString().toLowerCase().includes(s)}))},[o,h]),F=()=>d("/admin/products/new"),j=async(s,a,r)=>{if(await m(r))try{const g=`/admin/products/${a}/${s}`;await N.post(g),x()}catch(g){console.error(`Lỗi khi thực hiện hành động ${s}:`,g)}};return f?e.jsx(T,{}):e.jsx(U,{title:"Danh sách tài khoản game",showBackButton:!1,showBrowse:!0,showAddButton:!0,onAdd:F,onLocalSearch:y,initialSearchTermLocal:h,paginationMeta:w,onPageChange:C,onApplyFilters:v,onResetFilters:S,initialFilters:k,filterConfig:L,activeFilterCount:Object.keys(k).length,children:e.jsx(z,{products:P,handleKey:s=>j("restore",s,"Kích hoạt lại sản phẩm này?"),handleLock:s=>j("cancel",s,"Khóa sản phẩm này?")})})};export{q as default};
