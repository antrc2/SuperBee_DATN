import{r as l,j as t}from"./index-BDAcJp4Y.js";const u=()=>t.jsx("svg",{className:"w-4 h-4 text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:t.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})}),f=({isOpen:o,onClose:a,onConfirm:h,allUsers:s,initialSelectedUsers:i})=>{const[n,m]=l.useState(""),[c,x]=l.useState(new Set);l.useEffect(()=>{if(o){const e=new Set(i.map(r=>r.id));x(e)}},[o,i]);const g=l.useMemo(()=>{if(!n)return s;const e=n.toLowerCase();return s.filter(r=>r.username.toLowerCase().includes(e)||r.email.toLowerCase().includes(e))},[n,s]),y=e=>{x(r=>{const d=new Set(r);return d.has(e)?d.delete(e):d.add(e),d})},p=()=>{const e=s.filter(r=>c.has(r.id));h(e),a()};return o?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",onClick:a,children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full max-w-2xl max-h-[80vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Chọn người dùng áp dụng"}),t.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 text-2xl leading-none",children:"×"})]}),t.jsx("div",{className:"p-5",children:t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(u,{})}),t.jsx("input",{type:"text",placeholder:"Tìm theo tên hoặc email...",value:n,onChange:e=>m(e.target.value),className:"block w-full pl-10 pr-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-sky-500 focus:border-sky-500 dark:text-white"})]})}),t.jsx("div",{className:"flex-1 overflow-y-auto px-5 divide-y divide-gray-200 dark:divide-gray-700",children:g.length>0?g.map(e=>t.jsxs("label",{htmlFor:`user-${e.id}`,className:"p-4 flex items-center space-x-4 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[t.jsx("input",{type:"checkbox",id:`user-${e.id}`,checked:c.has(e.id),onChange:()=>y(e.id),className:"h-5 w-5 rounded border-gray-300 text-sky-600 focus:ring-sky-500"}),t.jsx("img",{className:"h-10 w-10 rounded-full object-cover bg-gray-100",src:e.avatar_url,alt:`Avatar of ${e.username}`,onError:r=>{r.target.onerror=null,r.target.src="https://placehold.co/40x40/e2e8f0/64748b?text=U"}}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",children:e.username}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:e.email})]})]},e.id)):t.jsx("p",{className:"text-center text-gray-500 p-8",children:"Không tìm thấy người dùng nào."})}),t.jsxs("div",{className:"p-5 border-t border-gray-200 dark:border-gray-700 flex justify-end items-center space-x-3",children:[t.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300 font-medium",children:["Đã chọn: ",c.size]}),t.jsx("button",{onClick:a,type:"button",className:"py-2 px-4 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500",children:"Hủy"}),t.jsx("button",{onClick:p,type:"button",className:"py-2 px-4 bg-sky-600 text-white rounded-lg hover:bg-sky-700",children:"Xác nhận"})]})]})}):null};export{f as U};
